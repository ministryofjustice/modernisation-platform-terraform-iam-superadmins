{
  "version": 4,
  "terraform_version": "1.6.5",
  "serial": 18,
  "lineage": "7e8188bc-504e-aafe-1ebe-a214e9dad07f",
  "outputs": {
    "superadmin_passwords": {
      "value": {},
      "type": [
        "object",
        {}
      ]
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1105698934",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AssumeRole\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"BoolIfExists\": {\n          \"aws:MultiFactorAuthPresent\": \"true\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [
                  {
                    "test": "BoolIfExists",
                    "values": [
                      "true"
                    ],
                    "variable": "aws:MultiFactorAuthPresent"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "AssumeRole"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "force_mfa",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1594223819",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowViewAccountInfo\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListVirtualMFADevices\",\n        \"iam:GetAccountSummary\",\n        \"iam:GetAccountPasswordPolicy\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnPasswords\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:GetUser\",\n        \"iam:ChangePassword\"\n      ],\n      \"Resource\": \"arn:aws:iam::*:user/${aws:username}\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnAccessKeys\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UpdateAccessKey\",\n        \"iam:ListAccessKeys\",\n        \"iam:DeleteAccessKey\",\n        \"iam:CreateAccessKey\"\n      ],\n      \"Resource\": \"arn:aws:iam::*:user/${aws:username}\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnSigningCertificates\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UploadSigningCertificate\",\n        \"iam:UpdateSigningCertificate\",\n        \"iam:ListSigningCertificates\",\n        \"iam:DeleteSigningCertificate\"\n      ],\n      \"Resource\": \"arn:aws:iam::*:user/${aws:username}\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnSSHPublicKeys\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UploadSSHPublicKey\",\n        \"iam:UpdateSSHPublicKey\",\n        \"iam:ListSSHPublicKeys\",\n        \"iam:GetSSHPublicKey\",\n        \"iam:DeleteSSHPublicKey\"\n      ],\n      \"Resource\": \"arn:aws:iam::*:user/${aws:username}\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnGitCredentials\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UpdateServiceSpecificCredential\",\n        \"iam:ResetServiceSpecificCredential\",\n        \"iam:ListServiceSpecificCredentials\",\n        \"iam:DeleteServiceSpecificCredential\",\n        \"iam:CreateServiceSpecificCredential\"\n      ],\n      \"Resource\": \"arn:aws:iam::*:user/${aws:username}\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnVirtualMFADevice\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:DeleteVirtualMFADevice\",\n        \"iam:CreateVirtualMFADevice\"\n      ],\n      \"Resource\": \"arn:aws:iam::*:mfa/${aws:username}\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnUserMFA\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ResyncMFADevice\",\n        \"iam:ListMFADevices\",\n        \"iam:EnableMFADevice\",\n        \"iam:DeactivateMFADevice\"\n      ],\n      \"Resource\": \"arn:aws:iam::*:user/${aws:username}\"\n    },\n    {\n      \"Sid\": \"DenyAllExceptListedIfNoMFA\",\n      \"Effect\": \"Deny\",\n      \"NotAction\": [\n        \"sts:GetSessionToken\",\n        \"iam:ResyncMFADevice\",\n        \"iam:ListVirtualMFADevices\",\n        \"iam:ListMFADevices\",\n        \"iam:GetUser\",\n        \"iam:EnableMFADevice\",\n        \"iam:CreateVirtualMFADevice\"\n      ],\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"BoolIfExists\": {\n          \"aws:MultiFactorAuthPresent\": \"false\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "iam:GetAccountPasswordPolicy",
                  "iam:GetAccountSummary",
                  "iam:ListVirtualMFADevices"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "AllowViewAccountInfo"
              },
              {
                "actions": [
                  "iam:ChangePassword",
                  "iam:GetUser"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::*:user/${aws:username}"
                ],
                "sid": "AllowManageOwnPasswords"
              },
              {
                "actions": [
                  "iam:CreateAccessKey",
                  "iam:DeleteAccessKey",
                  "iam:ListAccessKeys",
                  "iam:UpdateAccessKey"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::*:user/${aws:username}"
                ],
                "sid": "AllowManageOwnAccessKeys"
              },
              {
                "actions": [
                  "iam:DeleteSigningCertificate",
                  "iam:ListSigningCertificates",
                  "iam:UpdateSigningCertificate",
                  "iam:UploadSigningCertificate"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::*:user/${aws:username}"
                ],
                "sid": "AllowManageOwnSigningCertificates"
              },
              {
                "actions": [
                  "iam:DeleteSSHPublicKey",
                  "iam:GetSSHPublicKey",
                  "iam:ListSSHPublicKeys",
                  "iam:UpdateSSHPublicKey",
                  "iam:UploadSSHPublicKey"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::*:user/${aws:username}"
                ],
                "sid": "AllowManageOwnSSHPublicKeys"
              },
              {
                "actions": [
                  "iam:CreateServiceSpecificCredential",
                  "iam:DeleteServiceSpecificCredential",
                  "iam:ListServiceSpecificCredentials",
                  "iam:ResetServiceSpecificCredential",
                  "iam:UpdateServiceSpecificCredential"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::*:user/${aws:username}"
                ],
                "sid": "AllowManageOwnGitCredentials"
              },
              {
                "actions": [
                  "iam:CreateVirtualMFADevice",
                  "iam:DeleteVirtualMFADevice"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::*:mfa/${aws:username}"
                ],
                "sid": "AllowManageOwnVirtualMFADevice"
              },
              {
                "actions": [
                  "iam:DeactivateMFADevice",
                  "iam:EnableMFADevice",
                  "iam:ListMFADevices",
                  "iam:ResyncMFADevice"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::*:user/${aws:username}"
                ],
                "sid": "AllowManageOwnUserMFA"
              },
              {
                "actions": [],
                "condition": [
                  {
                    "test": "BoolIfExists",
                    "values": [
                      "false"
                    ],
                    "variable": "aws:MultiFactorAuthPresent"
                  }
                ],
                "effect": "Deny",
                "not_actions": [
                  "iam:CreateVirtualMFADevice",
                  "iam:EnableMFADevice",
                  "iam:GetUser",
                  "iam:ListMFADevices",
                  "iam:ListVirtualMFADevices",
                  "iam:ResyncMFADevice",
                  "sts:GetSessionToken"
                ],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "DenyAllExceptListedIfNoMFA"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_organizations_organization",
      "name": "root_account",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "accounts": null,
            "arn": "arn:aws:organizations::295814833350:organization/o-b2fpbzyd95",
            "aws_service_access_principals": [],
            "enabled_policy_types": [],
            "feature_set": "ALL",
            "id": "o-b2fpbzyd95",
            "master_account_arn": "arn:aws:organizations::295814833350:account/o-b2fpbzyd95/295814833350",
            "master_account_email": "aws+master@digital.justice.gov.uk",
            "master_account_id": "295814833350",
            "master_account_name": "",
            "non_master_accounts": null,
            "roots": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_secretsmanager_secret",
      "name": "environment_management",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].testing-ci-user",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-west-2:946070829339:secret:environment_management-BLRCDb",
            "created_date": "2020-09-29T15:49:12Z",
            "description": "IDs for AWS-specific resources for environment management, such as organizational unit IDs",
            "id": "arn:aws:secretsmanager:eu-west-2:946070829339:secret:environment_management-BLRCDb",
            "kms_key_id": "3a3a75ec-8d13-4e37-9667-b0face89551b",
            "last_changed_date": "2024-04-30T09:39:57Z",
            "name": "environment_management",
            "policy": "{\"Statement\":[{\"Action\":[\"secretsmanager:GetSecretValue\",\"secretsmanager:GetResourcePolicy\",\"secretsmanager:DescribeSecret\"],\"Condition\":{\"ForAnyValue:StringLike\":{\"aws:PrincipalOrgPaths\":\"o-b2fpbzyd95/*/ou-j1kx-qxsrh1gv/*\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"*\",\"Sid\":\"ReadOnlyFromModernisationPlatformOU\"}],\"Version\":\"2012-10-17\"}",
            "tags": {
              "application": "Modernisation Platform: Environments Management",
              "business-unit": "Platforms",
              "is-production": "true",
              "owner": "Modernisation Platform: modernisation-platform@digital.justice.gov.uk"
            }
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "arn"
              }
            ]
          ]
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_secretsmanager_secret_version",
      "name": "environment_management",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].testing-ci-user",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:secretsmanager:eu-west-2:946070829339:secret:environment_management-BLRCDb",
            "created_date": "2024-04-30T09:39:57Z",
            "id": "arn:aws:secretsmanager:eu-west-2:946070829339:secret:environment_management-BLRCDb|AWSCURRENT",
            "secret_binary": "",
            "secret_id": "arn:aws:secretsmanager:eu-west-2:946070829339:secret:environment_management-BLRCDb",
            "secret_string": "{\"account_ids\":{\"analytical-platform-compute-development\":\"381491960855\",\"analytical-platform-compute-production\":\"992382429243\",\"analytical-platform-compute-test\":\"767397661611\",\"analytical-platform-data-development\":\"803963757240\",\"analytical-platform-data-engineering-production\":\"189157455002\",\"analytical-platform-data-engineering-sandboxa\":\"684969100054\",\"analytical-platform-data-production\":\"593291632749\",\"analytical-platform-development\":\"525294151996\",\"analytical-platform-ingestion-development\":\"730335344807\",\"analytical-platform-ingestion-production\":\"471112983409\",\"analytical-platform-landing-production\":\"335823981503\",\"analytical-platform-management-production\":\"042130406152\",\"analytical-platform-production\":\"312423030077\",\"apex-development\":\"573115265413\",\"apex-preproduction\":\"167885717661\",\"apex-production\":\"485410571589\",\"apex-test\":\"763471180338\",\"bichard7-sandbox-a\":\"454061736096\",\"bichard7-sandbox-b\":\"108839434327\",\"bichard7-sandbox-c\":\"744728743481\",\"bichard7-sandbox-shared\":\"258361008057\",\"bichard7-shared\":\"497078235711\",\"bichard7-test-current\":\"439237763202\",\"bichard7-test-next\":\"581823340673\",\"ccms-ebs-development\":\"767123802783\",\"ccms-ebs-preproduction\":\"916521471442\",\"ccms-ebs-production\":\"285499101317\",\"ccms-ebs-test\":\"249362002469\",\"ccms-ebs-upgrade-development\":\"295992623913\",\"ccms-ebs-upgrade-test\":\"730335523459\",\"cdpt-chaps-development\":\"513884314856\",\"cdpt-chaps-preproduction\":\"631213771998\",\"cdpt-chaps-production\":\"653875321404\",\"cdpt-ifs-development\":\"224131490563\",\"cdpt-ifs-preproduction\":\"425030398367\",\"cdpt-ifs-production\":\"887445309397\",\"cica-copilot-development\":\"321388111150\",\"cica-data-extraction-development\":\"891377083667\",\"contract-work-administration-development\":\"381492101152\",\"contract-work-administration-preproduction\":\"992382556821\",\"contract-work-administration-production\":\"891377352109\",\"contract-work-administration-test\":\"767398105171\",\"cooker-development\":\"236861075084\",\"core-logging-production\":\"624384546187\",\"core-network-services-production\":\"505974653433\",\"core-sandbox-dev\":\"763252494486\",\"core-security-production\":\"744927879746\",\"core-shared-services-production\":\"374269020027\",\"core-vpc-development\":\"991589384446\",\"core-vpc-preproduction\":\"453136268281\",\"core-vpc-production\":\"278663825216\",\"core-vpc-sandbox\":\"267053793615\",\"core-vpc-test\":\"794399914478\",\"corporate-staff-rostering-development\":\"984329015469\",\"corporate-staff-rostering-preproduction\":\"754260907303\",\"corporate-staff-rostering-production\":\"221841889672\",\"corporate-staff-rostering-test\":\"950286732765\",\"dacp-development\":\"971346829878\",\"dacp-preproduction\":\"621717477303\",\"dacp-production\":\"500540837707\",\"data-and-insights-wepi-development\":\"289153439536\",\"data-and-insights-wepi-preproduction\":\"189100541811\",\"data-and-insights-wepi-production\":\"866445910544\",\"data-platform-apps-and-tools-development\":\"335889174965\",\"data-platform-apps-and-tools-production\":\"096705367497\",\"data-platform-compute-development\":\"010629933929\",\"data-platform-compute-production\":\"936294999754\",\"data-platform-development\":\"013433889002\",\"data-platform-preproduction\":\"386657846332\",\"data-platform-production\":\"209019631331\",\"data-platform-test\":\"259787491607\",\"delius-core-development\":\"326912278139\",\"delius-core-test\":\"673591086753\",\"delius-iaps-development\":\"744472264485\",\"delius-iaps-preproduction\":\"247467087019\",\"delius-iaps-production\":\"936195311149\",\"delius-jitbit-development\":\"142262177450\",\"delius-jitbit-preproduction\":\"943549848545\",\"delius-jitbit-production\":\"030357575975\",\"delius-jitbit-test\":\"374375479725\",\"delius-mis-development\":\"891377175249\",\"delius-mis-preproduction\":\"471112751565\",\"delius-mis-production\":\"590183722357\",\"delius-mis-test\":\"381492116631\",\"delius-nextcloud-development\":\"730335481788\",\"delius-nextcloud-preproduction\":\"637423206978\",\"delius-nextcloud-production\":\"905418244634\",\"delius-nextcloud-test\":\"637423185119\",\"digital-prison-reporting-development\":\"771283872747\",\"digital-prison-reporting-preproduction\":\"972272129531\",\"digital-prison-reporting-production\":\"004723187462\",\"digital-prison-reporting-test\":\"203591025782\",\"edw-development\":\"211125731383\",\"edw-preproduction\":\"590184068655\",\"edw-production\":\"654654289228\",\"edw-test\":\"339713144204\",\"electronic-monitoring-data-development\":\"800964199911\",\"electronic-monitoring-data-production\":\"976799291502\",\"equip-development\":\"608897814635\",\"equip-production\":\"647473535058\",\"eric-production\":\"588871925111\",\"eric-test\":\"285550827920\",\"example-development\":\"083957762049\",\"hmpps-domain-services-development\":\"139351334100\",\"hmpps-domain-services-preproduction\":\"228371063224\",\"hmpps-domain-services-production\":\"905761223702\",\"hmpps-domain-services-test\":\"161282055413\",\"hmpps-intelligence-management-development\":\"720459241262\",\"hmpps-intelligence-management-production\":\"198773633726\",\"hmpps-oem-development\":\"142645754276\",\"hmpps-oem-preproduction\":\"128485831926\",\"hmpps-oem-production\":\"411333525523\",\"hmpps-oem-test\":\"775245656481\",\"laa-ccms-infra-azure-ad-sso-development\":\"636100868237\",\"laa-oem-development\":\"957302878571\",\"laa-oem-preproduction\":\"937685963760\",\"laa-oem-production\":\"187373622398\",\"laa-oem-test\":\"552461967032\",\"long-term-storage-production\":\"421101632357\",\"maat-development\":\"580202064026\",\"maat-preproduction\":\"683570711159\",\"maat-production\":\"382546929470\",\"maat-test\":\"608611873248\",\"maatdb-development\":\"110341342196\",\"mi-platform-development\":\"967617145656\",\"mlra-development\":\"890609150221\",\"mlra-preproduction\":\"326671778942\",\"mlra-production\":\"222700158270\",\"mlra-test\":\"965215663362\",\"moj-network-operations-centre-preproduction\":\"724777394818\",\"moj-network-operations-centre-production\":\"208632142291\",\"mojfin-development\":\"337528781544\",\"mojfin-production\":\"953588221975\",\"mojfin-test\":\"363494522708\",\"ncas-development\":\"734966114400\",\"ncas-preproduction\":\"399776819968\",\"ncas-production\":\"077274413728\",\"nomis-combined-reporting-development\":\"109202698306\",\"nomis-combined-reporting-preproduction\":\"584696259367\",\"nomis-combined-reporting-production\":\"096098619724\",\"nomis-combined-reporting-test\":\"063212099033\",\"nomis-data-hub-development\":\"128054624476\",\"nomis-data-hub-preproduction\":\"998060512091\",\"nomis-data-hub-production\":\"896839021283\",\"nomis-data-hub-test\":\"144961511423\",\"nomis-development\":\"327850556621\",\"nomis-preproduction\":\"145445613877\",\"nomis-production\":\"272983201692\",\"nomis-test\":\"612659970365\",\"oas-development\":\"711138931639\",\"oas-preproduction\":\"252815677567\",\"oas-production\":\"183243495315\",\"oas-test\":\"500816998080\",\"oasys-development\":\"003430027717\",\"oasys-national-reporting-development\":\"590183832477\",\"oasys-national-reporting-preproduction\":\"851725495286\",\"oasys-national-reporting-production\":\"339713007864\",\"oasys-national-reporting-test\":\"590184072468\",\"oasys-preproduction\":\"450842467489\",\"oasys-production\":\"006231045038\",\"oasys-test\":\"546088120047\",\"observability-platform-development\":\"915524366300\",\"observability-platform-production\":\"319748487814\",\"operations-engineering-development\":\"211125434264\",\"opg-lpa-data-store-development\":\"493907465011\",\"performance-hub-development\":\"938841708445\",\"performance-hub-preproduction\":\"322518575883\",\"performance-hub-production\":\"143664002102\",\"planetfm-development\":\"326533041175\",\"planetfm-preproduction\":\"180609874479\",\"planetfm-production\":\"863036003053\",\"planetfm-test\":\"916099804813\",\"portal-development\":\"051234116874\",\"portal-preproduction\":\"716243088186\",\"portal-production\":\"865680895662\",\"portal-test\":\"530145168675\",\"ppud-development\":\"075585660276\",\"ppud-preproduction\":\"172753231260\",\"ppud-production\":\"817985104434\",\"pra-register-development\":\"704585569527\",\"pra-register-preproduction\":\"571270819804\",\"pra-register-production\":\"303170019013\",\"refer-monitor-development\":\"534609872573\",\"sprinkler-development\":\"348456244381\",\"tariff-development\":\"566373822119\",\"testing-test\":\"836052629367\",\"tipstaff-development\":\"913862848426\",\"tipstaff-preproduction\":\"842764906196\",\"tipstaff-production\":\"017977998587\",\"tribunals-development\":\"263310006819\",\"tribunals-preproduction\":\"821197214903\",\"tribunals-production\":\"259340111150\",\"wardship-development\":\"287639050124\",\"wardship-preproduction\":\"600508686860\",\"wardship-production\":\"077344000950\",\"xhibit-portal-development\":\"276038508461\",\"xhibit-portal-preproduction\":\"257452857869\",\"xhibit-portal-production\":\"674345106521\"},\"aws_organizations_root_account_id\":\"295814833350\",\"modernisation_platform_account_id\":\"946070829339\",\"modernisation_platform_organisation_unit_id\":\"ou-j1kx-qxsrh1gv\",\"ssm_resource_sync_bucket_name\":\"ssm-resource-sync-50974883831\",\"ssm_resource_sync_kms_arn\":\"arn:aws:kms:eu-west-2:245753150946:key/62460378-137f-4b77-9a62-2251569be5bc\"}",
            "version_id": "terraform-20240430093957184900000001",
            "version_stage": "AWSCURRENT",
            "version_stages": [
              "AWSCURRENT"
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "environment_management_arn",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].testing-ci-user",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:eu-west-2:836052629367:parameter/environment_management_arn",
            "id": "environment_management_arn",
            "insecure_value": "",
            "name": "environment_management_arn",
            "type": "SecureString",
            "value": "arn:aws:secretsmanager:eu-west-2:946070829339:secret:environment_management-BLRCDb",
            "version": 1,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "http",
      "name": "environments_file",
      "provider": "provider[\"registry.terraform.io/hashicorp/http\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "body": "{\n  \"account-type\": \"member\",\n  \"environments\": [\n    {\n      \"name\": \"test\",\n      \"access\": [\n        {\n          \"github_slug\": \"modernisation-platform\",\n          \"level\": \"developer\"\n        }\n      ]\n    }\n  ],\n  \"tags\": {\n    \"application\": \"testing\",\n    \"business-unit\": \"Platforms\",\n    \"infrastructure-support\": \"modernisation-platform@digital.justice.gov.uk\",\n    \"owner\": \"Modernisation Platform: modernisation-platform@digital.justice.gov.uk\"\n  },\n  \"github-oidc-team-repositories\": [\"\"]\n}\n",
            "ca_cert_pem": null,
            "id": "https://raw.githubusercontent.com/ministryofjustice/modernisation-platform/main/environments/testing.json",
            "insecure": null,
            "method": null,
            "request_body": null,
            "request_headers": null,
            "request_timeout_ms": null,
            "response_body": "{\n  \"account-type\": \"member\",\n  \"environments\": [\n    {\n      \"name\": \"test\",\n      \"access\": [\n        {\n          \"github_slug\": \"modernisation-platform\",\n          \"level\": \"developer\"\n        }\n      ]\n    }\n  ],\n  \"tags\": {\n    \"application\": \"testing\",\n    \"business-unit\": \"Platforms\",\n    \"infrastructure-support\": \"modernisation-platform@digital.justice.gov.uk\",\n    \"owner\": \"Modernisation Platform: modernisation-platform@digital.justice.gov.uk\"\n  },\n  \"github-oidc-team-repositories\": [\"\"]\n}\n",
            "response_body_base64": "ewogICJhY2NvdW50LXR5cGUiOiAibWVtYmVyIiwKICAiZW52aXJvbm1lbnRzIjogWwogICAgewogICAgICAibmFtZSI6ICJ0ZXN0IiwKICAgICAgImFjY2VzcyI6IFsKICAgICAgICB7CiAgICAgICAgICAiZ2l0aHViX3NsdWciOiAibW9kZXJuaXNhdGlvbi1wbGF0Zm9ybSIsCiAgICAgICAgICAibGV2ZWwiOiAiZGV2ZWxvcGVyIgogICAgICAgIH0KICAgICAgXQogICAgfQogIF0sCiAgInRhZ3MiOiB7CiAgICAiYXBwbGljYXRpb24iOiAidGVzdGluZyIsCiAgICAiYnVzaW5lc3MtdW5pdCI6ICJQbGF0Zm9ybXMiLAogICAgImluZnJhc3RydWN0dXJlLXN1cHBvcnQiOiAibW9kZXJuaXNhdGlvbi1wbGF0Zm9ybUBkaWdpdGFsLmp1c3RpY2UuZ292LnVrIiwKICAgICJvd25lciI6ICJNb2Rlcm5pc2F0aW9uIFBsYXRmb3JtOiBtb2Rlcm5pc2F0aW9uLXBsYXRmb3JtQGRpZ2l0YWwuanVzdGljZS5nb3YudWsiCiAgfSwKICAiZ2l0aHViLW9pZGMtdGVhbS1yZXBvc2l0b3JpZXMiOiBbIiJdCn0K",
            "response_headers": {
              "Accept-Ranges": "bytes",
              "Access-Control-Allow-Origin": "*",
              "Cache-Control": "max-age=300",
              "Content-Security-Policy": "default-src 'none'; style-src 'unsafe-inline'; sandbox",
              "Content-Type": "text/plain; charset=utf-8",
              "Cross-Origin-Resource-Policy": "cross-origin",
              "Date": "Tue, 30 Apr 2024 17:10:22 GMT",
              "Etag": "W/\"a1060a3448a2775c474957fa3a79abfda036a498f250570571c3db64073507f9\"",
              "Expires": "Tue, 30 Apr 2024 17:15:22 GMT",
              "Source-Age": "0",
              "Strict-Transport-Security": "max-age=31536000",
              "Vary": "Authorization,Accept-Encoding,Origin",
              "Via": "1.1 varnish",
              "X-Cache": "HIT",
              "X-Cache-Hits": "0",
              "X-Content-Type-Options": "nosniff",
              "X-Fastly-Request-Id": "6494ac51af03590ce2a35cef5d36a545dc254869",
              "X-Frame-Options": "deny",
              "X-Github-Request-Id": "E2BE:4E18F:60D073:77275B:663103E7",
              "X-Served-By": "cache-lhr7343-LHR",
              "X-Timer": "S1714497022.472583,VS0,VE147",
              "X-Xss-Protection": "1; mode=block"
            },
            "retry": null,
            "status_code": 200,
            "url": "https://raw.githubusercontent.com/ministryofjustice/modernisation-platform/main/environments/testing.json"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "time_sleep",
      "name": "wait_30_seconds",
      "provider": "provider[\"registry.terraform.io/hashicorp/time\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "create_duration": "30s",
            "destroy_duration": null,
            "id": "2024-04-30T17:11:04Z",
            "triggers": {
              "test.user-superadmin": "arn:aws:iam::836052629367:user/test.user-superadmin"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn",
            "module.iam_user.aws_iam_access_key.this",
            "module.iam_user.aws_iam_access_key.this_no_pgp",
            "module.iam_user.aws_iam_user.this",
            "module.iam_user.aws_iam_user_login_profile.this",
            "module.iam_user.aws_iam_user_policy_attachment.this",
            "module.iam_user.aws_iam_user_ssh_key.this"
          ]
        }
      ]
    },
    {
      "module": "module.iam_account",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": "836052629367",
            "arn": "arn:aws:sts::836052629367:assumed-role/MemberInfrastructureAccess/aws-go-sdk-1714497029809068000",
            "id": "836052629367",
            "user_id": "AROA4FKE6W53RB3YKOOUG:aws-go-sdk-1714497029809068000"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "836052629367",
            "arn": "arn:aws:sts::836052629367:assumed-role/MemberInfrastructureAccess/aws-go-sdk-1714497032867661000",
            "id": "836052629367",
            "user_id": "AROA4FKE6W53RB3YKOOUG:aws-go-sdk-1714497032867661000"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1127775978",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sts:TagSession\",\n        \"sts:AssumeRole\"\n      ],\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::836052629367:user/test.user-superadmin\",\n        \"Service\": []\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole",
                  "sts:TagSession"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::836052629367:user/test.user-superadmin"
                    ],
                    "type": "AWS"
                  },
                  {
                    "identifiers": [],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role_with_mfa",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2591806135",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"sts:TagSession\",\n        \"sts:AssumeRole\"\n      ],\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::836052629367:user/test.user-superadmin\",\n        \"Service\": []\n      },\n      \"Condition\": {\n        \"Bool\": {\n          \"aws:MultiFactorAuthPresent\": \"true\"\n        },\n        \"NumericLessThan\": {\n          \"aws:MultiFactorAuthAge\": \"86400\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole",
                  "sts:TagSession"
                ],
                "condition": [
                  {
                    "test": "Bool",
                    "values": [
                      "true"
                    ],
                    "variable": "aws:MultiFactorAuthPresent"
                  },
                  {
                    "test": "NumericLessThan",
                    "values": [
                      "86400"
                    ],
                    "variable": "aws:MultiFactorAuthAge"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::836052629367:user/test.user-superadmin"
                    ],
                    "type": "AWS"
                  },
                  {
                    "identifiers": [],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "data",
      "type": "aws_partition",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_suffix": "amazonaws.com",
            "id": "aws",
            "partition": "aws",
            "reverse_dns_prefix": "com.amazonaws"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "admin",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::836052629367:role/superadmin",
            "assume_role_policy": "{\"Statement\":[{\"Action\":[\"sts:TagSession\",\"sts:AssumeRole\"],\"Condition\":{\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\"},\"NumericLessThan\":{\"aws:MultiFactorAuthAge\":\"86400\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::836052629367:user/test.user-superadmin\",\"Service\":[]}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-04-30T17:11:05Z",
            "description": "",
            "force_detach_policies": false,
            "id": "superadmin",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 43200,
            "name": "superadmin",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROA4FKE6W536RWKHVQMD"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn",
            "module.iam_assumable_roles.data.aws_caller_identity.current",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role_with_mfa",
            "module.iam_assumable_roles.data.aws_partition.current",
            "module.iam_user.aws_iam_access_key.this",
            "module.iam_user.aws_iam_access_key.this_no_pgp",
            "module.iam_user.aws_iam_user.this",
            "module.iam_user.aws_iam_user_login_profile.this",
            "module.iam_user.aws_iam_user_policy_attachment.this",
            "module.iam_user.aws_iam_user_ssh_key.this",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "readonly",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::836052629367:role/readonly",
            "assume_role_policy": "{\"Statement\":[{\"Action\":[\"sts:TagSession\",\"sts:AssumeRole\"],\"Condition\":{\"Bool\":{\"aws:MultiFactorAuthPresent\":\"true\"},\"NumericLessThan\":{\"aws:MultiFactorAuthAge\":\"86400\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::836052629367:user/test.user-superadmin\",\"Service\":[]}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-04-30T17:11:05Z",
            "description": "",
            "force_detach_policies": false,
            "id": "readonly",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 43200,
            "name": "readonly",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROA4FKE6W53TTUE57OGK"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn",
            "module.iam_assumable_roles.data.aws_caller_identity.current",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role_with_mfa",
            "module.iam_assumable_roles.data.aws_partition.current",
            "module.iam_user.aws_iam_access_key.this",
            "module.iam_user.aws_iam_access_key.this_no_pgp",
            "module.iam_user.aws_iam_user.this",
            "module.iam_user.aws_iam_user_login_profile.this",
            "module.iam_user.aws_iam_user_policy_attachment.this",
            "module.iam_user.aws_iam_user_ssh_key.this",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "admin",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "superadmin-20240430171105706500000003",
            "policy_arn": "arn:aws:iam::aws:policy/AdministratorAccess",
            "role": "superadmin"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn",
            "module.iam_assumable_roles.aws_iam_role.admin",
            "module.iam_assumable_roles.data.aws_caller_identity.current",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role_with_mfa",
            "module.iam_assumable_roles.data.aws_partition.current",
            "module.iam_user.aws_iam_access_key.this",
            "module.iam_user.aws_iam_access_key.this_no_pgp",
            "module.iam_user.aws_iam_user.this",
            "module.iam_user.aws_iam_user_login_profile.this",
            "module.iam_user.aws_iam_user_policy_attachment.this",
            "module.iam_user.aws_iam_user_ssh_key.this",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "module": "module.iam_assumable_roles",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "readonly",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "id": "readonly-20240430171105666700000002",
            "policy_arn": "arn:aws:iam::aws:policy/ReadOnlyAccess",
            "role": "readonly"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn",
            "module.iam_assumable_roles.aws_iam_role.readonly",
            "module.iam_assumable_roles.data.aws_caller_identity.current",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role",
            "module.iam_assumable_roles.data.aws_iam_policy_document.assume_role_with_mfa",
            "module.iam_assumable_roles.data.aws_partition.current",
            "module.iam_user.aws_iam_access_key.this",
            "module.iam_user.aws_iam_access_key.this_no_pgp",
            "module.iam_user.aws_iam_user.this",
            "module.iam_user.aws_iam_user_login_profile.this",
            "module.iam_user.aws_iam_user_policy_attachment.this",
            "module.iam_user.aws_iam_user_ssh_key.this",
            "time_sleep.wait_30_seconds"
          ]
        }
      ]
    },
    {
      "module": "module.iam_group_admins_with_policies",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "account_id": "836052629367",
            "arn": "arn:aws:sts::836052629367:assumed-role/MemberInfrastructureAccess/aws-go-sdk-1714497029809068000",
            "id": "836052629367",
            "user_id": "AROA4FKE6W53RB3YKOOUG:aws-go-sdk-1714497029809068000"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_group_admins_with_policies",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "iam_self_management",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "1938494450",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"AllowViewAccountInfo\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListVirtualMFADevices\",\n        \"iam:GetAccountPasswordPolicy\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnPasswords\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UpdateLoginProfile\",\n        \"iam:GetUser\",\n        \"iam:GetLoginProfile\",\n        \"iam:ChangePassword\"\n      ],\n      \"Resource\": [\n        \"arn:aws:iam::836052629367:user/*/${aws:username}\",\n        \"arn:aws:iam::836052629367:user/${aws:username}\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowManageOwnAccessKeys\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UpdateAccessKey\",\n        \"iam:ListAccessKeys\",\n        \"iam:GetAccessKeyLastUsed\",\n        \"iam:DeleteAccessKey\",\n        \"iam:CreateAccessKey\"\n      ],\n      \"Resource\": [\n        \"arn:aws:iam::836052629367:user/*/${aws:username}\",\n        \"arn:aws:iam::836052629367:user/${aws:username}\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowManageOwnSigningCertificates\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UploadSigningCertificate\",\n        \"iam:UpdateSigningCertificate\",\n        \"iam:ListSigningCertificates\",\n        \"iam:DeleteSigningCertificate\"\n      ],\n      \"Resource\": [\n        \"arn:aws:iam::836052629367:user/*/${aws:username}\",\n        \"arn:aws:iam::836052629367:user/${aws:username}\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowManageOwnSSHPublicKeys\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UploadSSHPublicKey\",\n        \"iam:UpdateSSHPublicKey\",\n        \"iam:ListSSHPublicKeys\",\n        \"iam:GetSSHPublicKey\",\n        \"iam:DeleteSSHPublicKey\"\n      ],\n      \"Resource\": [\n        \"arn:aws:iam::836052629367:user/*/${aws:username}\",\n        \"arn:aws:iam::836052629367:user/${aws:username}\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowManageOwnGitCredentials\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:UpdateServiceSpecificCredential\",\n        \"iam:ResetServiceSpecificCredential\",\n        \"iam:ListServiceSpecificCredentials\",\n        \"iam:DeleteServiceSpecificCredential\",\n        \"iam:CreateServiceSpecificCredential\"\n      ],\n      \"Resource\": [\n        \"arn:aws:iam::836052629367:user/*/${aws:username}\",\n        \"arn:aws:iam::836052629367:user/${aws:username}\"\n      ]\n    },\n    {\n      \"Sid\": \"AllowManageOwnVirtualMFADevice\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"iam:CreateVirtualMFADevice\",\n      \"Resource\": \"arn:aws:iam::836052629367:mfa/*\"\n    },\n    {\n      \"Sid\": \"AllowManageOwnUserMFA\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ResyncMFADevice\",\n        \"iam:ListMFADevices\",\n        \"iam:EnableMFADevice\",\n        \"iam:DeactivateMFADevice\"\n      ],\n      \"Resource\": [\n        \"arn:aws:iam::836052629367:user/*/${aws:username}\",\n        \"arn:aws:iam::836052629367:user/${aws:username}\"\n      ]\n    },\n    {\n      \"Sid\": \"DenyAllExceptListedIfNoMFA\",\n      \"Effect\": \"Deny\",\n      \"NotAction\": [\n        \"sts:GetSessionToken\",\n        \"iam:ResyncMFADevice\",\n        \"iam:ListVirtualMFADevices\",\n        \"iam:ListMFADevices\",\n        \"iam:GetUser\",\n        \"iam:GetMFADevice\",\n        \"iam:EnableMFADevice\",\n        \"iam:CreateVirtualMFADevice\"\n      ],\n      \"Resource\": \"*\",\n      \"Condition\": {\n        \"BoolIfExists\": {\n          \"aws:MultiFactorAuthPresent\": \"false\"\n        }\n      }\n    }\n  ]\n}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "iam:GetAccountPasswordPolicy",
                  "iam:ListVirtualMFADevices"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "AllowViewAccountInfo"
              },
              {
                "actions": [
                  "iam:ChangePassword",
                  "iam:GetLoginProfile",
                  "iam:GetUser",
                  "iam:UpdateLoginProfile"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::836052629367:user/${aws:username}",
                  "arn:aws:iam::836052629367:user/*/${aws:username}"
                ],
                "sid": "AllowManageOwnPasswords"
              },
              {
                "actions": [
                  "iam:CreateAccessKey",
                  "iam:DeleteAccessKey",
                  "iam:GetAccessKeyLastUsed",
                  "iam:ListAccessKeys",
                  "iam:UpdateAccessKey"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::836052629367:user/${aws:username}",
                  "arn:aws:iam::836052629367:user/*/${aws:username}"
                ],
                "sid": "AllowManageOwnAccessKeys"
              },
              {
                "actions": [
                  "iam:DeleteSigningCertificate",
                  "iam:ListSigningCertificates",
                  "iam:UpdateSigningCertificate",
                  "iam:UploadSigningCertificate"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::836052629367:user/${aws:username}",
                  "arn:aws:iam::836052629367:user/*/${aws:username}"
                ],
                "sid": "AllowManageOwnSigningCertificates"
              },
              {
                "actions": [
                  "iam:DeleteSSHPublicKey",
                  "iam:GetSSHPublicKey",
                  "iam:ListSSHPublicKeys",
                  "iam:UpdateSSHPublicKey",
                  "iam:UploadSSHPublicKey"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::836052629367:user/${aws:username}",
                  "arn:aws:iam::836052629367:user/*/${aws:username}"
                ],
                "sid": "AllowManageOwnSSHPublicKeys"
              },
              {
                "actions": [
                  "iam:CreateServiceSpecificCredential",
                  "iam:DeleteServiceSpecificCredential",
                  "iam:ListServiceSpecificCredentials",
                  "iam:ResetServiceSpecificCredential",
                  "iam:UpdateServiceSpecificCredential"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::836052629367:user/${aws:username}",
                  "arn:aws:iam::836052629367:user/*/${aws:username}"
                ],
                "sid": "AllowManageOwnGitCredentials"
              },
              {
                "actions": [
                  "iam:CreateVirtualMFADevice"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::836052629367:mfa/*"
                ],
                "sid": "AllowManageOwnVirtualMFADevice"
              },
              {
                "actions": [
                  "iam:DeactivateMFADevice",
                  "iam:EnableMFADevice",
                  "iam:ListMFADevices",
                  "iam:ResyncMFADevice"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:iam::836052629367:user/${aws:username}",
                  "arn:aws:iam::836052629367:user/*/${aws:username}"
                ],
                "sid": "AllowManageOwnUserMFA"
              },
              {
                "actions": [],
                "condition": [
                  {
                    "test": "BoolIfExists",
                    "values": [
                      "false"
                    ],
                    "variable": "aws:MultiFactorAuthPresent"
                  }
                ],
                "effect": "Deny",
                "not_actions": [
                  "iam:CreateVirtualMFADevice",
                  "iam:EnableMFADevice",
                  "iam:GetMFADevice",
                  "iam:GetUser",
                  "iam:ListMFADevices",
                  "iam:ListVirtualMFADevices",
                  "iam:ResyncMFADevice",
                  "sts:GetSessionToken"
                ],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "DenyAllExceptListedIfNoMFA"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_group_admins_with_policies",
      "mode": "data",
      "type": "aws_partition",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_suffix": "amazonaws.com",
            "id": "aws",
            "partition": "aws",
            "reverse_dns_prefix": "com.amazonaws"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.iam_group_admins_with_policies",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "custom",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::836052629367:policy/ForceMFA",
            "attachment_count": 0,
            "description": "",
            "id": "arn:aws:iam::836052629367:policy/ForceMFA",
            "name": "ForceMFA",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"iam:ListVirtualMFADevices\",\"iam:GetAccountSummary\",\"iam:GetAccountPasswordPolicy\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowViewAccountInfo\"},{\"Action\":[\"iam:GetUser\",\"iam:ChangePassword\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnPasswords\"},{\"Action\":[\"iam:UpdateAccessKey\",\"iam:ListAccessKeys\",\"iam:DeleteAccessKey\",\"iam:CreateAccessKey\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnAccessKeys\"},{\"Action\":[\"iam:UploadSigningCertificate\",\"iam:UpdateSigningCertificate\",\"iam:ListSigningCertificates\",\"iam:DeleteSigningCertificate\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnSigningCertificates\"},{\"Action\":[\"iam:UploadSSHPublicKey\",\"iam:UpdateSSHPublicKey\",\"iam:ListSSHPublicKeys\",\"iam:GetSSHPublicKey\",\"iam:DeleteSSHPublicKey\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnSSHPublicKeys\"},{\"Action\":[\"iam:UpdateServiceSpecificCredential\",\"iam:ResetServiceSpecificCredential\",\"iam:ListServiceSpecificCredentials\",\"iam:DeleteServiceSpecificCredential\",\"iam:CreateServiceSpecificCredential\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnGitCredentials\"},{\"Action\":[\"iam:DeleteVirtualMFADevice\",\"iam:CreateVirtualMFADevice\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:mfa/${aws:username}\",\"Sid\":\"AllowManageOwnVirtualMFADevice\"},{\"Action\":[\"iam:ResyncMFADevice\",\"iam:ListMFADevices\",\"iam:EnableMFADevice\",\"iam:DeactivateMFADevice\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::*:user/${aws:username}\",\"Sid\":\"AllowManageOwnUserMFA\"},{\"Condition\":{\"BoolIfExists\":{\"aws:MultiFactorAuthPresent\":\"false\"}},\"Effect\":\"Deny\",\"NotAction\":[\"sts:GetSessionToken\",\"iam:ResyncMFADevice\",\"iam:ListVirtualMFADevices\",\"iam:ListMFADevices\",\"iam:GetUser\",\"iam:EnableMFADevice\",\"iam:CreateVirtualMFADevice\"],\"Resource\":\"*\",\"Sid\":\"DenyAllExceptListedIfNoMFA\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4FKE6W53ZNU5E6JDB",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_role",
            "data.aws_iam_policy_document.force_mfa",
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::836052629367:policy/AssumeRole",
            "attachment_count": 0,
            "description": "",
            "id": "arn:aws:iam::836052629367:policy/AssumeRole",
            "name": "AssumeRole",
            "name_prefix": "",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Condition\":{\"BoolIfExists\":{\"aws:MultiFactorAuthPresent\":\"true\"}},\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AssumeRole\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4FKE6W532SQO24SSC",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_iam_policy_document.assume_role",
            "data.aws_iam_policy_document.force_mfa",
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn"
          ]
        }
      ]
    },
    {
      "module": "module.iam_group_admins_with_policies",
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "iam_self_management",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::836052629367:policy/IAMSelfManagement-20240430171033104000000001",
            "attachment_count": 0,
            "description": "",
            "id": "arn:aws:iam::836052629367:policy/IAMSelfManagement-20240430171033104000000001",
            "name": "IAMSelfManagement-20240430171033104000000001",
            "name_prefix": "IAMSelfManagement-",
            "path": "/",
            "policy": "{\"Statement\":[{\"Action\":[\"iam:ListVirtualMFADevices\",\"iam:GetAccountPasswordPolicy\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"AllowViewAccountInfo\"},{\"Action\":[\"iam:UpdateLoginProfile\",\"iam:GetUser\",\"iam:GetLoginProfile\",\"iam:ChangePassword\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::836052629367:user/*/${aws:username}\",\"arn:aws:iam::836052629367:user/${aws:username}\"],\"Sid\":\"AllowManageOwnPasswords\"},{\"Action\":[\"iam:UpdateAccessKey\",\"iam:ListAccessKeys\",\"iam:GetAccessKeyLastUsed\",\"iam:DeleteAccessKey\",\"iam:CreateAccessKey\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::836052629367:user/*/${aws:username}\",\"arn:aws:iam::836052629367:user/${aws:username}\"],\"Sid\":\"AllowManageOwnAccessKeys\"},{\"Action\":[\"iam:UploadSigningCertificate\",\"iam:UpdateSigningCertificate\",\"iam:ListSigningCertificates\",\"iam:DeleteSigningCertificate\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::836052629367:user/*/${aws:username}\",\"arn:aws:iam::836052629367:user/${aws:username}\"],\"Sid\":\"AllowManageOwnSigningCertificates\"},{\"Action\":[\"iam:UploadSSHPublicKey\",\"iam:UpdateSSHPublicKey\",\"iam:ListSSHPublicKeys\",\"iam:GetSSHPublicKey\",\"iam:DeleteSSHPublicKey\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::836052629367:user/*/${aws:username}\",\"arn:aws:iam::836052629367:user/${aws:username}\"],\"Sid\":\"AllowManageOwnSSHPublicKeys\"},{\"Action\":[\"iam:UpdateServiceSpecificCredential\",\"iam:ResetServiceSpecificCredential\",\"iam:ListServiceSpecificCredentials\",\"iam:DeleteServiceSpecificCredential\",\"iam:CreateServiceSpecificCredential\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::836052629367:user/*/${aws:username}\",\"arn:aws:iam::836052629367:user/${aws:username}\"],\"Sid\":\"AllowManageOwnGitCredentials\"},{\"Action\":\"iam:CreateVirtualMFADevice\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:iam::836052629367:mfa/*\",\"Sid\":\"AllowManageOwnVirtualMFADevice\"},{\"Action\":[\"iam:ResyncMFADevice\",\"iam:ListMFADevices\",\"iam:EnableMFADevice\",\"iam:DeactivateMFADevice\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:iam::836052629367:user/*/${aws:username}\",\"arn:aws:iam::836052629367:user/${aws:username}\"],\"Sid\":\"AllowManageOwnUserMFA\"},{\"Condition\":{\"BoolIfExists\":{\"aws:MultiFactorAuthPresent\":\"false\"}},\"Effect\":\"Deny\",\"NotAction\":[\"sts:GetSessionToken\",\"iam:ResyncMFADevice\",\"iam:ListVirtualMFADevices\",\"iam:ListMFADevices\",\"iam:GetUser\",\"iam:GetMFADevice\",\"iam:EnableMFADevice\",\"iam:CreateVirtualMFADevice\"],\"Resource\":\"*\",\"Sid\":\"DenyAllExceptListedIfNoMFA\"}],\"Version\":\"2012-10-17\"}",
            "policy_id": "ANPA4FKE6W53TIO4Z3SR3",
            "tags": null,
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn",
            "module.iam_group_admins_with_policies.data.aws_caller_identity.current",
            "module.iam_group_admins_with_policies.data.aws_iam_policy_document.iam_self_management",
            "module.iam_group_admins_with_policies.data.aws_partition.current"
          ]
        }
      ]
    },
    {
      "module": "module.iam_user[\"test.user\"]",
      "mode": "managed",
      "type": "aws_iam_access_key",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.iam_user[\"test.user\"]",
      "mode": "managed",
      "type": "aws_iam_access_key",
      "name": "this_no_pgp",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.iam_user[\"test.user\"]",
      "mode": "managed",
      "type": "aws_iam_user",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::836052629367:user/test.user-superadmin",
            "force_destroy": true,
            "id": "test.user-superadmin",
            "name": "test.user-superadmin",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AIDA4FKE6W534OTI6EFGY"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_secretsmanager_secret.environment_management",
            "data.aws_secretsmanager_secret_version.environment_management",
            "data.aws_ssm_parameter.environment_management_arn"
          ]
        }
      ]
    },
    {
      "module": "module.iam_user[\"test.user\"]",
      "mode": "managed",
      "type": "aws_iam_user_login_profile",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.iam_user[\"test.user\"]",
      "mode": "managed",
      "type": "aws_iam_user_policy_attachment",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.iam_user[\"test.user\"]",
      "mode": "managed",
      "type": "aws_iam_user_ssh_key",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    }
  ],
  "check_results": null
}
